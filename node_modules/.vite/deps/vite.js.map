{
  "version": 3,
  "sources": ["../../vite/dist/node/index.js"],
  "sourcesContent": ["export { parseAst, parseAstAsync } from 'rollup/parseAst';\r\nimport { i as isInNodeModules, a as arraify } from './chunks/dep-BBHrJRja.js';\r\nexport { b as build, g as buildErrorMessage, k as createFilter, v as createLogger, c as createServer, d as defineConfig, h as fetchModule, f as formatPostcssSourceMap, x as isFileServingAllowed, l as loadConfigFromFile, y as loadEnv, j as mergeAlias, m as mergeConfig, n as normalizePath, o as optimizeDeps, e as preprocessCSS, p as preview, r as resolveConfig, z as resolveEnvPrefix, q as rollupVersion, w as searchForWorkspaceRoot, u as send, s as sortUserPlugins, t as transformWithEsbuild } from './chunks/dep-BBHrJRja.js';\r\nexport { VERSION as version } from './constants.js';\r\nexport { version as esbuildVersion } from 'esbuild';\r\nimport { existsSync, readFileSync } from 'node:fs';\r\nimport { ViteRuntime, ESModulesRunner } from 'vite/runtime';\r\nimport 'node:fs/promises';\r\nimport 'node:path';\r\nimport 'node:url';\r\nimport 'node:util';\r\nimport 'node:perf_hooks';\r\nimport 'node:module';\r\nimport 'tty';\r\nimport 'path';\r\nimport 'fs';\r\nimport 'events';\r\nimport 'assert';\r\nimport 'node:child_process';\r\nimport 'node:http';\r\nimport 'node:https';\r\nimport 'util';\r\nimport 'net';\r\nimport 'url';\r\nimport 'http';\r\nimport 'stream';\r\nimport 'os';\r\nimport 'child_process';\r\nimport 'node:os';\r\nimport 'node:crypto';\r\nimport 'node:dns';\r\nimport 'crypto';\r\nimport 'module';\r\nimport 'node:assert';\r\nimport 'node:v8';\r\nimport 'node:worker_threads';\r\nimport 'node:buffer';\r\nimport 'node:events';\r\nimport 'querystring';\r\nimport 'node:readline';\r\nimport 'zlib';\r\nimport 'buffer';\r\nimport 'https';\r\nimport 'tls';\r\nimport 'node:zlib';\r\n\r\n// This file will be built for both ESM and CJS. Avoid relying on other modules as possible.\r\n// copy from constants.ts\r\nconst CSS_LANGS_RE = \r\n// eslint-disable-next-line regexp/no-unused-capturing-group\r\n/\\.(css|less|sass|scss|styl|stylus|pcss|postcss|sss)(?:$|\\?)/;\r\nconst isCSSRequest = (request) => CSS_LANGS_RE.test(request);\r\n// Use splitVendorChunkPlugin() to get the same manualChunks strategy as Vite 2.7\r\n// We don't recommend using this strategy as a general solution moving forward\r\n// splitVendorChunk is a simple index/vendor strategy that was used in Vite\r\n// until v2.8. It is exposed to let people continue to use it in case it was\r\n// working well for their setups.\r\n// The cache needs to be reset on buildStart for watch mode to work correctly\r\n// Don't use this manualChunks strategy for ssr, lib mode, and 'umd' or 'iife'\r\nclass SplitVendorChunkCache {\r\n    cache;\r\n    constructor() {\r\n        this.cache = new Map();\r\n    }\r\n    reset() {\r\n        this.cache = new Map();\r\n    }\r\n}\r\nfunction splitVendorChunk(options = {}) {\r\n    const cache = options.cache ?? new SplitVendorChunkCache();\r\n    return (id, { getModuleInfo }) => {\r\n        if (isInNodeModules(id) &&\r\n            !isCSSRequest(id) &&\r\n            staticImportedByEntry(id, getModuleInfo, cache.cache)) {\r\n            return 'vendor';\r\n        }\r\n    };\r\n}\r\nfunction staticImportedByEntry(id, getModuleInfo, cache, importStack = []) {\r\n    if (cache.has(id)) {\r\n        return cache.get(id);\r\n    }\r\n    if (importStack.includes(id)) {\r\n        // circular deps!\r\n        cache.set(id, false);\r\n        return false;\r\n    }\r\n    const mod = getModuleInfo(id);\r\n    if (!mod) {\r\n        cache.set(id, false);\r\n        return false;\r\n    }\r\n    if (mod.isEntry) {\r\n        cache.set(id, true);\r\n        return true;\r\n    }\r\n    const someImporterIs = mod.importers.some((importer) => staticImportedByEntry(importer, getModuleInfo, cache, importStack.concat(id)));\r\n    cache.set(id, someImporterIs);\r\n    return someImporterIs;\r\n}\r\nfunction splitVendorChunkPlugin() {\r\n    const caches = [];\r\n    function createSplitVendorChunk(output, config) {\r\n        const cache = new SplitVendorChunkCache();\r\n        caches.push(cache);\r\n        const build = config.build ?? {};\r\n        const format = output?.format;\r\n        if (!build.ssr && !build.lib && format !== 'umd' && format !== 'iife') {\r\n            return splitVendorChunk({ cache });\r\n        }\r\n    }\r\n    return {\r\n        name: 'vite:split-vendor-chunk',\r\n        config(config) {\r\n            let outputs = config?.build?.rollupOptions?.output;\r\n            if (outputs) {\r\n                outputs = arraify(outputs);\r\n                for (const output of outputs) {\r\n                    const viteManualChunks = createSplitVendorChunk(output, config);\r\n                    if (viteManualChunks) {\r\n                        if (output.manualChunks) {\r\n                            if (typeof output.manualChunks === 'function') {\r\n                                const userManualChunks = output.manualChunks;\r\n                                output.manualChunks = (id, api) => {\r\n                                    return userManualChunks(id, api) ?? viteManualChunks(id, api);\r\n                                };\r\n                            }\r\n                            else {\r\n                                // else, leave the object form of manualChunks untouched, as\r\n                                // we can't safely replicate rollup handling.\r\n                                // eslint-disable-next-line no-console\r\n                                console.warn(\"(!) the `splitVendorChunk` plugin doesn't have any effect when using the object form of `build.rollupOptions.output.manualChunks`. Consider using the function form instead.\");\r\n                            }\r\n                        }\r\n                        else {\r\n                            output.manualChunks = viteManualChunks;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                return {\r\n                    build: {\r\n                        rollupOptions: {\r\n                            output: {\r\n                                manualChunks: createSplitVendorChunk({}, config),\r\n                            },\r\n                        },\r\n                    },\r\n                };\r\n            }\r\n        },\r\n        buildStart() {\r\n            caches.forEach((cache) => cache.reset());\r\n        },\r\n    };\r\n}\r\n\r\nclass ServerHMRBroadcasterClient {\r\n    hmrChannel;\r\n    constructor(hmrChannel) {\r\n        this.hmrChannel = hmrChannel;\r\n    }\r\n    send(...args) {\r\n        let payload;\r\n        if (typeof args[0] === 'string') {\r\n            payload = {\r\n                type: 'custom',\r\n                event: args[0],\r\n                data: args[1],\r\n            };\r\n        }\r\n        else {\r\n            payload = args[0];\r\n        }\r\n        if (payload.type !== 'custom') {\r\n            throw new Error('Cannot send non-custom events from the client to the server.');\r\n        }\r\n        this.hmrChannel.send(payload);\r\n    }\r\n}\r\n/**\r\n * The connector class to establish HMR communication between the server and the Vite runtime.\r\n * @experimental\r\n */\r\nclass ServerHMRConnector {\r\n    handlers = [];\r\n    hmrChannel;\r\n    hmrClient;\r\n    connected = false;\r\n    constructor(server) {\r\n        const hmrChannel = server.hot?.channels.find((c) => c.name === 'ssr');\r\n        if (!hmrChannel) {\r\n            throw new Error(\"Your version of Vite doesn't support HMR during SSR. Please, use Vite 5.1 or higher.\");\r\n        }\r\n        this.hmrClient = new ServerHMRBroadcasterClient(hmrChannel);\r\n        hmrChannel.api.outsideEmitter.on('send', (payload) => {\r\n            this.handlers.forEach((listener) => listener(payload));\r\n        });\r\n        this.hmrChannel = hmrChannel;\r\n    }\r\n    isReady() {\r\n        return this.connected;\r\n    }\r\n    send(message) {\r\n        const payload = JSON.parse(message);\r\n        this.hmrChannel.api.innerEmitter.emit(payload.event, payload.data, this.hmrClient);\r\n    }\r\n    onUpdate(handler) {\r\n        this.handlers.push(handler);\r\n        handler({ type: 'connected' });\r\n        this.connected = true;\r\n    }\r\n}\r\n\r\nfunction createHMROptions(server, options) {\r\n    if (server.config.server.hmr === false || options.hmr === false) {\r\n        return false;\r\n    }\r\n    const connection = new ServerHMRConnector(server);\r\n    return {\r\n        connection,\r\n        logger: options.hmr?.logger,\r\n    };\r\n}\r\nconst prepareStackTrace = {\r\n    retrieveFile(id) {\r\n        if (existsSync(id)) {\r\n            return readFileSync(id, 'utf-8');\r\n        }\r\n    },\r\n};\r\nfunction resolveSourceMapOptions(options) {\r\n    if (options.sourcemapInterceptor != null) {\r\n        if (options.sourcemapInterceptor === 'prepareStackTrace') {\r\n            return prepareStackTrace;\r\n        }\r\n        if (typeof options.sourcemapInterceptor === 'object') {\r\n            return { ...prepareStackTrace, ...options.sourcemapInterceptor };\r\n        }\r\n        return options.sourcemapInterceptor;\r\n    }\r\n    if (typeof process !== 'undefined' && 'setSourceMapsEnabled' in process) {\r\n        return 'node';\r\n    }\r\n    return prepareStackTrace;\r\n}\r\n/**\r\n * Create an instance of the Vite SSR runtime that support HMR.\r\n * @experimental\r\n */\r\nasync function createViteRuntime(server, options = {}) {\r\n    const hmr = createHMROptions(server, options);\r\n    return new ViteRuntime({\r\n        ...options,\r\n        root: server.config.root,\r\n        fetchModule: server.ssrFetchModule,\r\n        hmr,\r\n        sourcemapInterceptor: resolveSourceMapOptions(options),\r\n    }, options.runner || new ESModulesRunner());\r\n}\r\n\r\nexport { ServerHMRConnector, createViteRuntime, isCSSRequest, splitVendorChunk, splitVendorChunkPlugin };\r\n"],
  "mappings": "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",
  "names": ["build"]
}
